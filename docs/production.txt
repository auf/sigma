# -=- encoding: utf-8 -=-

Description
===========

Pour faire un mise en production sur une machine de test, les étapes de 
déploiement sont presque les mêmes que dans un contexte de développement.

Toutefois certaines étapes sont un peu différentes. Nous les décrirons dans
cette documentation


Étapes de déploiement
=====================

	# git clone repos-sigma-git@dev.savoirfairelinux.net:/var/repos/sigma/git/sigma.git Sigma

	  Votre clef ssh publique doit être enregistrée dans le dépot du projet	

	# cd Sigma

	# python bootstrap.py

	# bin/buildout -c production.cfg

	  Si l'une des étapes échoues parce qu'un paquet est manquant, il 
	  s'agit de trouver le egg correspondant sur le net, le mieux alors 
	  est de se procurer le egg en question sur une machine ayant déjà 
	  une installation fonctionnelle. Le egg en question doit être placé 
	  dans le répertoire "eggs" du projet.	  

	  S'il n'y a aucune machine qui n'a un egg compatible avec notre 
	  installation, cela peut aider de seulement relancer la commande
	  du buildout, soit maintenant, soit un peu plus tard.

	# bin/django syncdb

	  Les configurations de la base de données en productions se trouvent
	  dans le fichier:
	       
	       Sigma/projects/production.py

	# cd src/sigma.www/sigma/www

	# ../../../../bin/django compilemessages -l fr

	  Notons que pour que la compilation du fichier .po de traduction
	  fonctionne, il faut que le paquet gettext soit installé. Si ce n'est
	  pas le cas, il suffit de faire:

	      sudo aptitude install gettext

	# cd ../../../../

	# bin/django runserver

	  Cette commande nous lance un serveur sur le port 8000 de la machine
	  courrante. Si on préfère utiliser le mode wsgi, il suffit de 
	  configurer apache avec le fichier wsgi qui se trouve le répertoire
	  bin, soit:
	       
	       Sigma/bin/django.wsgi


Contact
=======

En cas de pépin, il suffit d'écrire à Mathieu !
